@startuml
!include style.puml

box Logic LOGIC_COLOR_T1
participant ":UiManager" as UiManager LOGIC_COLOR
end box

box Ui UI_COLOR_T1
participant ":MainWindow" as MainWindow UI_COLOR
participant ":CalendarPanel" as CalendarPanel UI_COLOR
participant "ListPanel" as ListPanel UI_COLOR
participant "LogPanel" as LogPanel UI_COLOR
end box

'==== UiManager ===='
[-> UiManager : onModelListChange(lists)
activate UiManager
UiManager -> UiManager : sortDateEventList(events)
UiManager -> UiManager : sortDateTaskList(tasks)
UiManager -> UiManager : addEventIndex(events)
UiManager -> UiManager : addTaskIndex(tasks)

'==== MainWindow ====
UiManager -> MainWindow : onModelListChange(events, tasks, eventHash, taskHash)
activate MainWindow

'==== CalendarPanel ====
MainWindow -> CalendarPanel : onModelListChange(events, tasks, eventHash, taskHash)
activate CalendarPanel
CalendarPanel --> MainWindow
deactivate CalendarPanel
CalendarPanel -[hidden]--> CalendarPanel
'==== ListPanel ====
MainWindow -> ListPanel : onEventListChange(events, eventHash)
activate ListPanel
ListPanel --> MainWindow
deactivate ListPanel
ListPanel -[hidden]--> ListPanel

MainWindow -> ListPanel : onTaskListChange(tasks, taskHash)
activate ListPanel
ListPanel --> MainWindow
deactivate ListPanel
ListPanel -[hidden]--> ListPanel

'==== MainWindow ====
MainWindow --> UiManager
deactivate MainWindow
MainWindow -[hidden]--> MainWindow

deactivate UiManager
UiManager -[hidden]--> UiManager

'==== UiManager ===='
[-> UiManager : onUserOutput(output, colorTheme)
activate UiManager

'==== MainWindow ====
UiManager -> MainWindow : onUserOutput(output. colorTheme)
activate MainWindow
MainWindow -> MainWindow : getColor(colorTheme)

'==== LogPanel ====
MainWindow -> LogPanel : createLogBox(feedbackToUser, colorTheme)

activate LogPanel
LogPanel --> MainWindow
deactivate LogPanel
LogPanel -[hidden]--> LogPanel

'==== MainWindow ====
MainWindow -> MainWindow : createPopUpBox
MainWindow -[hidden]> MainWindow
MainWindow --> UiManager
deactivate MainWindow

deactivate UiManager
UiManager -[hidden]--> UiManager
@enduml
